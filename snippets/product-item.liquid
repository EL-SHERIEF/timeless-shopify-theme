<li class="grid gap-2">
  <a class="group grid gap-2" href="{{ product.url | within: collection }}">
    <figure class="relative">
      <div class="overflow-hidden rounded-2xl bg-[#f9f6fe]">
        {%- if product.featured_image -%}
          {{ product.featured_image
            | image_url: width: 500, height: 500
            | image_tag: class: 'w-full group-hover:scale-110 transition-transform duration-500 ease-out z-10', loading: 'lazy'
          }}
          {{ shop.name | link_to: routes.root_url, class: 'decorname text-[5vw] font-[900] absolute top-[80px] left-1/2 -translate-x-1/2 z-0 pointer-events-none opacity-10' }}
        {%- else -%}
          {{ 'product-1' | placeholder_svg_tag }}
        {%- endif -%}

        {%- assign price = product.selected_or_first_available_variant.price | default: 0 -%}
        {%- assign compare_price = product.selected_or_first_available_variant.compare_at_price | default: 0 -%}

        {%- if compare_price > price and price > 0 -%}
          {%- assign price_difference = compare_price | minus: price -%}
          {%- assign discount_percentage = price_difference | divided_by: compare_price | times: 100 | round -%}
          <span class="absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-[9px]">
            {{ discount_percentage }}% OFF
          </span>
        {%- endif -%}

        <span class="absolute top-2 left-2 bg-black text-white text-xs font-bold px-2 py-1 rounded-[9px]">
          ONLY {{ product.selected_or_first_available_variant.inventory_quantity | default: 0 }} LEFT
        </span>
      </div>
    </figure>

    <div class="text-lg sm:text-md font-semibold text-gray-800 mt-3">
      {{ product.title | default: 'Product title' }}
    </div>
  </a>

  <div class="text-sm sm:text-sm text-gray-600">
    <span>
      <strong class="text-sm font-bold text-gray-900">{{ product.price_min | default: 0 | money }}</strong>
    </span>
    {% if price < compare_price %}
      <span class="ml-2 text-gray-400 line-through">
        {{ compare_price | money }}
      </span>
    {% endif %}
  </div>
</li>
