<script src="https://cdn.tailwindcss.com"></script>

<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        // base
        canvas: '{{ settings.color_schemes.default.settings.canvas }}',
        ink: '{{ settings.color_schemes.default.settings.ink }}',
        stroke: '{{ settings.color_schemes.default.settings.stroke }}',
        // subdued
        'canvas-subdued': '{{ settings.color_schemes.default.settings.canvas_subdued }}',
        'ink-subdued': '{{ settings.color_schemes.default.settings.ink_subdued }}',
        // accents
        primary: '{{ settings.color_schemes.default.settings.primary }}',
        'primary-contrasting': '{{ settings.color_schemes.default.settings.primary_contrasting }}',
        secondary: '{{ settings.color_schemes.default.settings.secondary }}',
        'secondary-contrasting': '{{ settings.color_schemes.default.settings.secondary_contrasting }}',
        // other
        alert: '#f00',
        warning: '#eab308',
      },
      fontFamily: {
        heading: `{{ settings.font_heading.family }},{{ settings.font_heading.fallback_families }}`,
        body: `{{ settings.font_body.family }},{{ settings.font_body.fallback_families }}`,
      },
      screens: {
        '<md': { max: '767px' },
        '<sm': { max: '639px' },
        '<lg': { max: '1023px' },
        '<xl': { max: '1279px' },
        '<2xl': { max: '1535px' },
      },
    }
  }
}
</script>

<style type="text/tailwindcss">
{{ settings.font_heading | font_face: font_display: string }}
{{ settings.font_body | font_face: font_display: string }}

@layer base {
  :root {
    --border-radius: {{ settings.border_radius }}px;
  }

  [hidden] { display: none !important; }

  body {
    @apply bg-canvas text-ink accent-primary caret-primary font-body;
  }

  summary {
    cursor: pointer;
    display: block;
  }
  :-webkit-details-marker {
    display: none;
  }

  label, select {
    cursor: pointer;
  }

  hr {
    @apply border-stroke;
  }
}

@layer components {
  /* typography */

  ._h {
    @apply font-heading;
  }
  .h1 { @apply _h text-4xl; }
  .h2 { @apply _h text-3xl; }
  .h3 { @apply _h text-xl; }
  .h4 { @apply _h text-lg; }
  .h5 { @apply _h; }
  .h6 { @apply _h; }

  .technical {
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }

  /* links, CTAs */

  ._btn {
    cursor: pointer;
    display: inline-flex;
    gap: .5em;
    align-items: center;
    justify-content: center;
    border-radius: var(--border-radius);
    padding: 0.5em 1em;

    @apply disabled:grayscale;
  }

  .action {
    @apply _btn bg-primary text-primary-contrasting;
  }
  .action-secondary {
    @apply _btn bg-secondary text-secondary-contrasting;
  }

  .ghost {
    @apply _btn hover:bg-primary/10 active:bg-primary/20;
  }

  .link {
    @apply underline hover:decoration-2;
  }

  .hashtag {
    &::before {
      @apply content-['#'] text-ink-subdued;
    }
    &[href]:hover::before {
      color: inherit;
    }
  }

  /* inputs */

  .input {
    border-radius: var(--border-radius);
    padding-inline: .5em;

    @apply
      inline-flex border border-stroke bg-transparent
      hover:border-opacity-100 hover:border-ink-subdued;

    &:invalid:not(:placeholder-shown) {
      @apply border-alert;
    }
  }

  .input-number {
    @apply input text-center pr-0;
  }
  .input-number-label {
    @apply relative z-[1] inline-block bg-canvas translate-x-full leading-none;
  }

  /* tokens */

  .price, [data-price], [data-compare-at-price] {
    font-variant-numeric: tabular-nums;

    & s {
      @apply decoration-alert;
    }
  }
  .price-negative {
    @apply price text-alert before:content-['-'];
  }

  /* layouts */

  .section {
    @apply max-w-screen-xl mx-auto py-8 sm:py-12 px-4 sm:px-8;
  }

  .pagination {
    @apply flex justify-center gap-4;

    & .current {
      @apply font-bold;
    }

    & a:hover {
      text-decoration: underline;
    }
  }
}

@layer utilities {
  .full-width {
    width: 100vw;
    margin-inline: calc(50% - 50vw);
  }

  .sticky-below-header {
    position: sticky;
    top: calc(var(--header-height, 0px) + var(--offset, 0px));
  }

  .with-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: .5em;

    & svg {
      height: 1.5em;
      transition: scale 0.1s ease-in-out;
    }

    [open] > & svg,
    &:hover svg,
    &:is(button, [href]):focus svg {
      scale: 1.2;
    }
  }

  .with-label {
    @apply flex flex-col items-start gap-1;

    & label {
      z-index: 1;
      margin-bottom: -1.2em;
      padding-inline: .5em;
      font-size: x-small;
      @apply relative technical ml-1 bg-canvas text-ink;
    }

    & textarea, & input {
      @apply py-2;
    }
  }

  .with-accordion {
    & .with-icon svg {
      height: 1.2em;
      @apply transition-transform;
    }

    &[open] svg {
      @apply rotate-90;
    }
  }

  .divider {
    position: relative;

    & span {
      position: relative;
      padding-right: 0.5ch;
      @apply bg-white;
    }

    &::before {
      content: '';
      position: absolute;
      inset: 50% 0 auto;
      translate: 0 -50%;
      @apply border-b border-stroke;
    }
  }

  .carousel {
    display: flex;
    align-items: flex-start;
    overflow-x: auto;
    scroll-snap-type: x mandatory;

    & > * {
      scroll-snap-align: center;
      flex: 0 0 var(--size, min(80vw, 280px));
    }
  }

  /* richtext */

  .rte > * + * {
    margin-top: var(--spacing, 1em);
  }

  .rte h1 { @apply h1; }
  .rte h2 { @apply h2; }
  .rte h3 { @apply h3; }
  .rte h4 { @apply h4; }
  .rte h5 { @apply h5; }
  .rte h6 { @apply h6; }

  .rte :is(ul, ol) {
    list-style: revert;
    padding-left: 1.5em;
  }

  .rte a:not(.action) {
    @apply link;
  }

  .rte :is(th, td) {
    padding: 0.25em 1em;
    @apply border;
  }
}
</style>
