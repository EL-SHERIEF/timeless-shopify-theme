{% schema %}
{
  "name": "story teller",
  "settings": [
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#fff9f3"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#1a1a1a"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Say goodbye to the pains of traditional hair removal"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Imagine never again feeling the pain of waxing or the irritation of shaving. With our IPL technology, hair removal becomes gentle and pleasant. Say goodbye to redness and ingrown hairs for soothed skin."
    },
    {
      "type": "select",
      "id": "media_type",
      "label": "Media Type",
      "options": [
        { "value": "image", "label": "Image" },
        { "value": "video", "label": "Video" }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image",
      "info": "Upload an image if media type is set to 'Image'"
    },
    {
      "type": "url",
      "id": "video_url",
      "label": "Video URL",
      "info": "Enter a direct video URL (e.g., .mp4 hosted on your store) if media type is set to 'Video'"
    }
  ],
  "presets": [
    {
      "name": "Hair Removal Section",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<div class="hair-removal-section section section-blends section-full">
  <div class="bg-custom py-8" style="--background: {{ section.settings.background_color | split: '#' | last | replace: ' ', '' }}; --text-color: {{ section.settings.text_color | split: '#' | last | replace: ' ', '' }};">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="hair-removal flex flex-col md:flex-row items-center gap-6">
        <div class="hair-removal__content w-full md:w-1/2 bg-custom text-custom p-4 rounded" style="--background: {{ section.settings.background_color | split: '#' | last | replace: ' ', '' }}; --text-color: {{ section.settings.text_color | split: '#' | last | replace: ' ', '' }};">
          <div class="prose break-all text-center md:text-left" reveal-on-scroll="true" style="opacity: 1;">
            <h2 class="text-xl md:text-2xl font-bold">{{ section.settings.title }}</h2>
            <p class="text-base mt-2">{{ section.settings.description }}</p>
          </div>
        </div>
        <div class="hair-removal__media rounded w-full md:w-1/2 overflow-hidden" reveal-on-scroll="true" style="opacity: 1;">
          {% if section.settings.media_type == "image" and section.settings.image %}
            <img src="{{ section.settings.image | img_url: '600x' }}" alt="" loading="lazy" sizes="(max-width: 999px) 100vw, min(650px, 50vw)" style="width: 100%; height: auto; transform: scale(1); object-fit: cover;">
          {% elsif section.settings.media_type == "video" and section.settings.video_url %}
            <video src="{{ section.settings.video_url }}" autoplay loop muted style="width: 100%; height: auto; min-height: 300px; object-fit: cover;" playsinline>
              Your browser does not support the video tag.
            </video>
          {% else %}
            <div class="w-full h-64 bg-gray-200 rounded"></div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .hair-removal-section {
    padding: 20px 10px;
  }

  .bg-custom {
    background-color: rgb(var(--background, 255 249 243));
    color: rgb(var(--text-color, 26 26 26));
  }

  .text-custom {
    color: rgb(var(--text-color, 26 26 26));
  }

  .py-8 {
    padding-top: 2rem;
    padding-bottom: 2rem;
  }

  .max-w-5xl {
    max-width: 64rem;
  }

  .mx-auto {
    margin-left: auto;
    margin-right: auto;
  }

  .px-4 {
    padding-left: 1rem;
    padding-right: 1rem;
  }

  .sm:px-6 {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }

  .lg:px-8 {
    padding-left: 2rem;
    padding-right: 2rem;
  }

  .flex {
    display: flex;
  }

  .flex-col {
    flex-direction: column;
  }

  .md:flex-row {
    flex-direction: row;
  }

  .items-center {
    align-items: center;
  }

  .gap-6 {
    gap: 1.5rem;
  }

  .hair-removal__content {
    width: 100%;
  }

  .hair-removal__media {
    width: 100%;
  }

  .rounded {
    border-radius: 0.5rem;
  }

  .overflow-hidden {
    overflow: hidden;
  }

  .p-4 {
    padding: 1rem;
  }

  .text-xl {
    font-size: 1.25rem;
    line-height: 1.75rem;
  }

  .md:text-2xl {
    font-size: 1.5rem;
    line-height: 2rem;
  }

  .font-bold {
    font-weight: 700;
  }

  .text-base {
    font-size: 1rem;
    line-height: 1.5rem;
  }

  .mt-2 {
    margin-top: 0.5rem;
  }

  .prose p {
    margin: 0;
  }

  .prose h2 {
    margin-bottom: 0.5rem;
  }

  /* Responsive Adjustments */
  @media (max-width: 768px) {
    .text-xl {
      font-size: 1.125rem;
    }

    .md:text-2xl {
      font-size: 1.25rem;
    }

    .text-base {
      font-size: 0.875rem;
    }

    .p-4 {
      padding: 0.75rem;
    }

    .gap-6 {
      gap: 1rem;
    }

    .hair-removal__media img,
    .hair-removal__media video {
      min-height: 200px;
    }
  }
</style>